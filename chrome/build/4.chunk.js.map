{"version":3,"sources":["webpack:///./assets/img/arrow.png","webpack:///./assets/img/brush.png","webpack:///./assets/img/circle.png","webpack:///./assets/img/pan.png","webpack:///./assets/img/redo.png","webpack:///./assets/img/square.png","webpack:///./assets/img/text.png","webpack:///./assets/img/undo.png","webpack:///./src/components/Alert.js","webpack:///./src/components/ColorIcon.js","webpack:///./src/components/ColorPicker.js","webpack:///./src/components/Form.js","webpack:///./src/components/InputText.js","webpack:///./src/components/Modal.js","webpack:///./src/containers/ScreenCapturePage.js","webpack:///./src/containers/SettingsPage.js","webpack:///./src/hocomponents/Field.js","webpack:///./src/utils/imageAnnotate.js","webpack:///./src/utils/validation.js"],"names":["Alert","children","style","Error","object","transformMessage","message","Object","entries","length","map","key","value","i","toUpperCase","Array","isArray","join","Success","width","height","color","onChange","label","displayColorPicker","setDisplayColorPicker","React","useState","onSubmit","serializeArray","elements","data","input","name","endsWith","inputName","replace","push","dispatchEvent","events","inputContaineErrors","formNode","Set","has","nodeName","includes","event","isValidForm","validation","error","inputs","Children","forEach","child","props","validate","some","fn","apply","handleSubmit","preventDefault","target","Event","keys","blurEvent","changeEvent","onBlur","type","icon","Modal","title","onClose","f","Body","Footer","ScreenCaptureEditor","Component","constructor","values","currentUser","editSettings","editSettingsLocal","e","setState","showModal","state","annotate","exportImage","CAPTURE_ANNOTATION_OPTIONS","imageBase64","a","document","createElement","href","download","screenshot","uuid","click","imageURI","editScreenshot","history","ROUTING","TRELLO_PAGE","imageAnnotateRef","createRef","undefined","componentDidMount","removeMessages","fetchScreenshot","match","params","componentDidUpdate","prevProps","prevState","settingsSuccess","settingsError","settings","screenshotError","success","Annotate","current","images","tools","updateOptions","componentUnMount","render","OPTIONS_PAGE","onShowSettings","onDownloadScreenCapture","onContinue","onEditSettings","mapDispatchToProps","dispatch","bindActionCreators","mapStateToProps","auth","screenshots","connect","TextField","Field","InputText","SettingsPage","hex","initData","fontsize","rules","required","minLength","maxLength","linewidth","digits","min","max","onColorChange","el","options","$el","$","$toolElem","clicked","fromx","fromy","fromxText","fromyText","tox","toy","points","storedUndo","storedElement","img","selectedImage","currentWidth","currentHeight","selectImageSize","compensationWidthRate","init","prototype","self","addClass","css","cursor","baseLayerId","attr","drawingLayerId","toolOptionId","append","baseCanvas","getElementById","drawingCanvas","baseContext","getContext","drawingContext","lineJoin","classPosition1","classPosition2","$tool","undo","unselectTool","pan","square","circle","text","arrow","brush","redo","canvasPosition","offset","$textbox","initBackgroundImages","on","find","removeClass","parent","selectTool","trigger","redoaction","undoaction","selectEvent","image","selectBackgroundImage","idAttribute","setBackgroundImage","annotatestart","annotatestop","annotateleave","annotatemove","window","annotateresize","checkUndoRedo","generateId","chars","split","charsLen","Math","floor","random","str","addElements","newStoredElements","set","callback","clear","redraw","pushImage","newImage","id","path","each","index","grep","element","is","pushText","currentImage","Image","src","onload","drawImage","pop","drawRectangle","drawArrow","b","drawPen","drawText","maxwidth","drawCircle","context","x","y","w","h","beginPath","rect","fillStyle","fill","lineWidth","strokeStyle","stroke","x1","y1","x2","y2","radiusX","radiusY","centerX","centerY","step","pi2","PI","moveTo","cos","sin","lineTo","closePath","angle","atan2","wrapText","maxWidth","lineHeight","lines","words","line","n","testLine","metrics","measureText","testWidth","fillText","font","textBaseline","val","hide","left","top","pageX","originalEvent","touches","pageY","show","currentcompensationWidthRate","String","parseInt","extend","quality","getColor","JSON","parse","stringify","destroy","off","remove","removeData","exportDefaults","toDataURL","onExport","cmdOption","$annotate","opts","defaults","bootstrap","position","console","log","email","test","isFinite","pattern","equalTo","eq"],"mappings":"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","file":"4.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAg0lEQVR4Ae3PoRGAQADEQAqgOwp+QVkIeI+IABGY3Mz57PKHtdZaa+18eX5AgACPwdv8wQB/PAP88XfM1+I3ALjjlzkAuOMB4I4HgDseAO54AsjjGSCPZ4A+ngH+eAb44wUAjhcDON4J4HjPii+++OIFgMHxbsA6v3O8HzFs8a211toFUaa9F9kvYr0AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAA80lEQVR4Ae3SEWzEcBTH8cLB4DznKRTnbsPCPIPC3GGewbAwGA4PBgeHg4M6FQ4Kg3kGn9HZlvYPS16z93H4/vJedZFSSgk1epzQrS2+wQQAeFxlfMGI8PEA3ZrjYVhzPPRrjp9Qrzm+yfiMz/g/kfEZn/EZHwmG+PHlFwgXXzCiID7+iADx2OAOB4wY0ONmZkSI+B1OfveM7Q8jhhBvg6N5b1VEuLdcG3HAwXL7iAM+LTdGi2+UOUcb0CnzHil+h0mZhwjhW7QYlflCHWHAKyj3VEWADV6UOWJTRYIWH+b1l/hwcIVb7HEGwIge19W/llJK33O+WThLAiVrAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACSElEQVR4Ae3YAWTDQABA0SIohqAoimIYoBiKAgBDEEBRBDAUQxEUBUAxFAUMwxAMAwxBMQxQDEVxgKAIgu5jOCfderlLb8jnAc3JVXLu0mqyU1PT8XjsIcIKCTbY/UjxgkeM0fkvN+0jxgY6FXjHFG0XN97GDBlME4jgXerm7yBguy8M6775GL+V4gEBhuj/GCFEjM8/Hq1JHTd+hWeUlWGKjuYLP0eOspbwbE4ggVqBBXyDcbtYnZqErZufQ01gZPEPCnCA2sR04BBqW/RreEwHEJArMDRZ4zPICfRqXCQGOJSsTl6VwRaQyzX+DdPHSS2q8nLlkJu1LlTJiy3Q1hlgWTqASeZ/4FRngJ3xamB/9XvXeZHkDmg72t3KFehU2S4kLUeVbDvG51z0qn3R5fZej+dc9AG5W4cTCCH3cs5Fe8j1HE5gBLn074uUHJ/4+pDbmU3A/Uq0P+ciAbmuwwkMIbepsnQNHE4g0F7S+dEb5EKHE3iA3KrKLvTJ4QRSyEVVlq4MnoOb74DKlnT9FzlwMIEp5DY6F6+tnIrI4mkw1hngGoXG86eX/nuYwTc9FWW4udD2oYDczNapaAu/5q2DsHYa5MJ7qKXwa9o2bKF2ZzrwGmpb3FjeMgioxTYG95BCLUMEz8Jn+hxqz7a/EqQo6wsBPM0bn0CgrARXtp9RD2ucKsMTQgzQVZ7vW4yR4IBTzete5u6Rw3aZ/sbR/LN4AdNyg8/0xhO5xhoCuu2wLD8wuTuAL/CGT2VSe3zgFbG9Q1JTU9M3aYdz37O+QlMAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABHklEQVR4AezZEVBEQRjA8YWD4JwPcocgD4MwCMKDnA4PgpzDIJ8HQRDkHIRBEBz8wmB3Zm/mte19zf71yfvNN98nm1qHBS4w4RXrFCncyjuLBPiQ9xhmQpQLMyHK7Tuh7ktaB5Trv6RxAJUlDQAoNv/7/CvVE1C/UkEA9SsVAFBsAAZgAAZgAAZgAP4HoFMDMAAtAVjhFEehAFjiAQDvuAwBwBJPyr3g5NABk3r3WB0q4Bw79b6wwbI3YAbiZz/6AuYj9ASERqSsYIi0T7gOBsjDOgAgHiJlBUOkrGCIlBUL8ZayYiGe09xwo1+bdg987dvhOGXFQWzTb4etv2nCIrUIV/jUrrtmP/89JE9IQDs756nUELwPxLOB2ACXnQDI55PSbt5htAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABJklEQVR4Ae3WAWcCYRzH8TAEGIYwhCGE3sMwQC8jhGEIYQhhCAOEMMAAQ4AhQIBhCMMhQAiH8BkEdEvXnrTx/3AA5/vznMdVQgghhBBCCIfA03+OH8GpXt5ABxO84wNf2D5mGKOL5rHxkDL6GkMslbfAALUy8ZAivI5XbPzeBmPU9sUnGYAL9JBLb41uUXySAahh7vSmuMQIkgxAA5n9ckzRwy2aqG+fBu7Qxwwb+60gyQC0sPazDA+4KnmaA6yUp+xnkym2wRDVypFwiclJBqCKuWJLtCqJoI089YBHxT5RqySE+6QngBvkdmXniS8/4M2uHK1zx8MBV2ah/vnjgVL/HYAFLs4TX37Ac8G93/kr8XDoFdrGCzJUU8anGhBCCCGEEEII3w/z7u4seGJYAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAiElEQVR4Ae3PIQGEQBQA0Y1wARBEuKYEIAQBCIE4cZIIK5CIAQsG89lv5iWYKXoiSQI6YAR+vG8BBuATFd8DlfbWkAlgIs8QMVDJswQMXJWXceNA2oADDjjggAMOOOCAAw444IADDjjgwEaef8TATJ4xYuAL7LRXga6coiZmYGsUPgF9eSBJ0gFh7t5ruzrRJAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwAQAAAAB/ecQqAAAAAnRSTlMAAHaTzTgAAAAZSURBVHgBYyAb2P///4c4ioH9AcOgp6gEAIlxKP9SIsK/AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABIElEQVR4Ae3RAURDYRSG4YsQwkUIwzAECBAChgAQAIYAMAwhDCGEEMIAAQKEEAYIYQgAQxiGIQwXTxChu8vm/9k4DwfA53WKEEIIIYQQtgcudj2g2ukI2DQCp+jjCe+Y/p0JxnhED+1sAetEoIN7fFnfFFc4zBDQHIEOnqWxxChJCDRFYA9DVNJb4DJBQH0EWviQ3ysOUgZAhblmS7xhgC46aKONE5xjiDEqzT5xlC6g2QwDlGvstHCDudVmaOUMqHCH/WJDKDGy2gQHOQIWOCsSQRff6r3kCIB+kRCOMVOvlz4gX0TdJ+Yo0wfkiThX7yF9QL6Ikf+WKHMFJI1AicXaG7BFEbcAgDmucwcki0ALM4zQxV7xK4QQQgghhBB+AA1l6bTKlXQ+AAAAAElFTkSuQmCC\"","import React from 'react'\n\n\nconst Alert = ({children, style }) => (\n  <div className={`alert alert-${style}`} role=\"alert\">\n    { children }\n  </div>\n)\n\n\nAlert.Error = ({object, style=\"danger\" }) => {\n  const transformMessage = () => {\n    const { message } = object\n    if (typeof message === 'string'){\n      return (<p key={0} className=\"m-0 p-0\"><strong key={0}>Oops! </strong>{message.message}</p>)\n    }\n\n    if (typeof message === 'object' && Object.entries(message).length){\n      return Object.entries(message).map(([key, value], i) =>\n        (<p key={key} className=\"m-0 p-0\"><strong key={key}>{key.toUpperCase()}: </strong>{Array.isArray(value) ? value.join(', ') : value}</p>)\n      )\n    }\n\n    return (<p key={0} className=\"m-0 p-0\"><strong key={0}>Oops! </strong>Bad things happend</p>)\n  }\n\n  return (\n    <Alert style={style}>\n      {transformMessage()}\n    </Alert>\n  )\n}\n\n\nAlert.Success = ({ object, style=\"success\" }) => {\n  \n  const transformMessage = () => {\n    if (typeof object === 'object' && Object.entries(object).length){\n      return Object.entries(object).map(([key, value], i) =>\n        (<p key={key} className=\"m-0 p-0\"><strong key={key}>{key.toUpperCase()}: </strong>{Array.isArray(value) ? value.join(', ') : value}</p>)\n      )\n    }\n    \n    return (<p className=\"m-0 p-0\"><strong>Well done! </strong>{object}</p>)\n  }\n\n  return (\n    <Alert style={style}>\n      {transformMessage()}\n    </Alert>\n  )\n}\n\n\nexport default Alert\n","import React from 'react'\n\nexport default ({width=\"30px\", height=\"30px\", color=\"#ffffff\"}) =>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n    version=\"1.1\"\n    x=\"0px\"\n    y=\"0px\"\n    width=\"30px\"\n    height=\"30px\"\n    viewBox=\"0 0 431.985 431.985\"\n  >\n    <g>\n      <g>\n        <path\n          d=\"M423.257,51.829c-0.808-2.045-2.67-3.484-4.853-3.751c-2.177-0.266-4.335,0.682-5.612,2.472   c-7.581,10.629-17.529,14.172-29.053,18.275c-9.292,3.31-18.901,6.73-29.286,14.186c-14.687,10.544-21.405,24.917-18.055,38.54   l-0.358,0.459c-6.133-8.897-12.806-17.126-19.848-24.474c-32.947-34.378-78.984-55.046-126.311-56.703   c-2.085-0.073-4.204-0.11-6.298-0.11c-52.846,0-103.428,23.624-138.775,64.813C9.646,146.512-5.939,199.853,2.051,251.882   c0.668,4.349,1.504,8.743,2.487,13.063c12.996,57.202,46.189,100.717,91.069,119.383c11.063,4.602,22.222,6.934,33.163,6.934   c27.183,0,50.926-14.539,65.143-39.889c5.404-9.646,8.891-19.621,10.36-29.651c0.866-5.92,0.274-11.835-0.3-17.567   c-0.591-5.9-1.149-11.476-0.256-17.09c2.047-12.869,11.036-20.553,24.047-20.553c3.701,0,7.483,0.609,11.26,1.812   c-4.422,8.11-8.438,15.854-11.947,23.032c-7.437,15.212-12.567,27.81-15.252,37.44c-1.655,5.939-6.052,21.722,4.67,29.164   c3.405,2.363,7.722,3.197,12.215,2.361c4.049-0.752,16.369-3.041,51.378-42.896c9.396-10.695,19.521-23.072,30.104-36.794   c27.168-9.15,48.31-31.921,53.903-58.087c1.4-6.541,1.984-13.541,1.735-20.812c10.172-15.72,19.094-30.388,28.072-46.156   c0.172-0.304,0.342-0.628,0.51-0.96c13.031-3.569,24.254-13.71,30.842-27.891C434.872,106.028,434.163,79.428,423.257,51.829z    M276.385,149.834c-4.713,7.485-12.814,11.954-21.673,11.954c-4.81,0-9.515-1.361-13.605-3.937   c-5.782-3.642-9.803-9.317-11.316-15.98s-0.345-13.518,3.298-19.301c4.714-7.485,12.816-11.954,21.675-11.954   c4.811,0,9.515,1.361,13.604,3.938c5.782,3.64,9.802,9.315,11.316,15.979C281.197,137.197,280.026,144.051,276.385,149.834z    M309.592,196.187c12.934-19.057,26.612-38,39.604-54.85c2.106,1.902,4.461,3.76,7.012,5.53c4.227,2.933,8.648,5.201,13.164,6.754   c-10.969,18.758-22.763,37.342-37.043,58.375c-23.463,34.571-47.859,66.684-68.695,90.424   c-11.638,13.26-21.823,23.498-29.671,29.839c3.029-9.69,8.818-22.989,16.875-38.746   C265.245,265.336,286.111,230.772,309.592,196.187z M82.506,196.023c-4.811,0-9.516-1.361-13.607-3.938   c-5.782-3.641-9.801-9.314-11.315-15.979c-1.514-6.664-0.342-13.519,3.301-19.302c4.711-7.484,12.813-11.953,21.671-11.953   c4.812,0,9.517,1.361,13.607,3.938c11.936,7.518,15.532,23.345,8.019,35.279C99.466,191.554,91.363,196.023,82.506,196.023z    M55.688,252.358c4.713-7.486,12.814-11.955,21.673-11.955c4.81,0,9.514,1.362,13.606,3.938c5.782,3.641,9.801,9.315,11.315,15.979   c1.515,6.662,0.343,13.516-3.301,19.301c-4.711,7.483-12.813,11.953-21.671,11.953c-4.811,0-9.517-1.361-13.609-3.938   c-5.782-3.642-9.8-9.315-11.313-15.979C50.876,264.995,52.049,258.14,55.688,252.358z M137.62,100.414   c4.713-7.485,12.815-11.954,21.673-11.954c4.809,0,9.514,1.361,13.604,3.937c11.937,7.516,15.533,23.344,8.019,35.28   c-4.715,7.486-12.817,11.955-21.675,11.955c-4.81,0-9.515-1.361-13.605-3.938c-5.781-3.64-9.799-9.314-11.313-15.979   C132.807,113.052,133.979,106.198,137.62,100.414z\"\n          data-original=\"#000000\"\n          className=\"active-path\"\n          data-old_color=\"#000000\"\n          fill={color}\n        />\n      </g>\n    </g>\n  </svg>\n\n","import React from 'react'\nimport { TwitterPicker } from 'react-color'\n\nimport ColorIcon from './ColorIcon'\n\nexport default ({ color, onChange, label='Choose a Color' }) => {\n\n  const [displayColorPicker, setDisplayColorPicker] = React.useState(false)\n\n  return (\n    <div>\n      <div onClick={ () => setDisplayColorPicker(!displayColorPicker) } className=\"color-picker-label\">\n        <span>{label}</span> : <ColorIcon color={color} />\n      </div>\n      { displayColorPicker && <div className=\"color-picker-popover\">\n        <div className=\"color-picker-cover\" onClick={ () => setDisplayColorPicker(false) } />\n        <TwitterPicker color={ color } onChangeComplete={ onChange } />\n      </div>\n      }\n    </div>\n  )\n}\n\n","import React from 'react'\n\n\nexport default ({ children, onSubmit }) => {\n\n  const serializeArray = (elements) => {\n    const data = {}\n    for(let input of elements){\n      if (input.name !== \"\" && !input.name.endsWith(\"[]\") ){\n        data[input.name] = input.value\n      }else if (input.name !== \"\"  && input.name.endsWith(\"[]\")){\n        const inputName = input.name.replace(\"[]\", \"\")\n        Array.isArray(data[inputName]) ? data[inputName].push(input.value) : data[inputName] = [input.value]\n      }\n    }\n    return data\n  }\n\n  const dispatchEvent = (events, elements, inputContaineErrors = []) => {\n    let formNode = new Set([\"INPUT\", \"SELECT\", \"TEXTAREA\"])\n    for(let input of elements) {\n      if (formNode.has(input.nodeName) && inputContaineErrors.includes(input.name)){\n        events.map((event) => input.dispatchEvent(event))\n      }\n    }\n  }\n\n  const isValidForm = (events, object) => {\n    let validation, error=false\n    let inputs = []\n    React.Children.forEach(children, (child) => {\n      if (child.props.validate){\n        validation = Array.isArray(child.props.validate) ? child.props.validate : [child.props.validate]\n        error = validation.some((fn) => fn.apply(null, [object[child.props.name]]))\n        if (error) {\n          inputs.push(child.props.name)\n        }\n      }\n    })\n    return inputs\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    const object = serializeArray(event.target.elements)\n    const inputContaineErrors = isValidForm([ new Event(\"blur\")], object)\n    if (!inputContaineErrors.length){\n      Object.keys(object).forEach((key) => (object[key] === null || object[key] === \"\" ) && delete object[key])\n      onSubmit(object)\n    }else {\n      const blurEvent = new Event(\"blur\")\n      const changeEvent = new Event(\"focus\")\n      dispatchEvent([blurEvent, changeEvent], event.target.elements, inputContaineErrors)\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      {children}\n    </form>\n  )\n}\n","import React from 'react'\n\n\nexport default props => {\n  const { onBlur, type=\"text\", icon, error=null, ...input } = props\n  return (\n    <div className=\"form-group\">\n      <div className={(\"input-group input-group-alternative mb-3 \") + ( error ? \" has-danger \" : \"\")}>\n        {\n          icon &&\n          <div className=\"input-group-prepend\">\n            <span className=\"input-group-text\"><i className={`ni ${icon}`}></i></span>\n          </div>\n        }\n        <input\n          className={(\"form-control \") + (error ? \" is-invalid \": \"\")}\n          type={type}\n          onBlur={onBlur}\n          {...input}\n        />\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\n\n\nimport Button from './Button'\n\n\nconst Modal = ({title, children, onClose=f=>f}) => (\n  <div>\n    <div className=\"modal fade show\" role=\"dialog\" tabIndex=\"-1\">\n      <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <h6 className=\"modal-title\" id=\"modal-title-default\">{title}</h6>\n            <button onClick={onClose} aria-label=\"Close\" className=\"close\" data-dismiss=\"modal\" type=\"button\">\n              <span aria-hidden=\"true\"></span>\n            </button>\n          </div>\n          {children}\n        </div>\n      </div>\n    </div>\n    <div className=\"modal-backdrop fade show\"></div>\n  </div>\n)\n\n\nModal.Body = ({children}) => (\n  <div className=\"modal-body\">\n    {children}\n  </div>\n)\n\n\nModal.Footer = ({children}) => (\n  <div className=\"modal-footer\">\n    {children}\n  </div>\n)\n\nexport default Modal\n","import React from 'react'\nimport { NavLink, Redirect } from 'react-router-dom'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\n\nimport { ROUTING, CAPTURE_ANNOTATION_OPTIONS } from '../constants'\n\nimport Annotate from '../utils/imageAnnotate'\n\nimport { removeMessages, fetchScreenshot, editScreenshot, editSettings, editSettingsLocal } from '../actions'\n\nimport Container from '../components/Container'\nimport Card from '../components/Card'\nimport Navbar from '../components/Navbar'\nimport Loader from '../components/Loader'\nimport SettingsPage from './SettingsPage'\nimport TextAlign from '../components/TextAlign'\nimport ErrorPage from '../components/ErrorPage'\n\n\nclass ScreenCaptureEditor extends React.Component {\n\n  constructor(props){\n    super(props)\n    this.imageAnnotateRef = React.createRef()\n    this.annotate = undefined\n    this.state = { showModal: false }\n  }\n\n  componentDidMount() {\n    this.props.removeMessages()\n    this.props.fetchScreenshot(this.props.match.params)\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n\n    const { settingsSuccess, settingsError } = prevProps\n    if (settingsSuccess || settingsError) {\n      this.props.removeMessages()\n    }\n\n    const { settings, screenshot, screenshotError, settingsSuccess: success } = this.props\n    if (settings && screenshot && !this.annotate && this.imageAnnotateRef && !screenshotError){\n      this.annotate = new Annotate(this.imageAnnotateRef.current, { ...settings, ...{ images: [screenshot.imageURI] }, tools: \"#js-tools-menu\" })\n    }\n    if (this.annotate && success) {\n      this.annotate.updateOptions(settings)\n      this.setState({ showModal: false })\n    }\n  }\n\n  componentUnMount() {\n    this.annotate = undefined\n    this.imageAnnotateRef = undefined\n  }\n\n  onEditSettings = (values) => {\n    const { currentUser} = this.props\n    if (currentUser){\n      this.props.editSettings(values)  \n    }else {\n      this.props.editSettingsLocal(values)\n    }\n  }\n\n  onShowSettings = (e) => {\n    this.setState({ showModal: !this.state.showModal })\n  }\n\n  onDownloadScreenCapture = (e) => {\n    this.annotate.exportImage(CAPTURE_ANNOTATION_OPTIONS, (imageBase64) => {\n      const a = document.createElement(\"a\")\n      a.href = imageBase64\n      a.download = `${this.props.screenshot.uuid}.jpeg`\n      a.target = '_blank'\n      a.click()\n    })\n  }\n\n  onContinue = (e) => {\n    e.preventDefault()\n    const { screenshot } = this.props\n    this.annotate.exportImage(CAPTURE_ANNOTATION_OPTIONS, (imageURI) =>\n      this.props.editScreenshot({ ...screenshot, imageURI }, { uuid: screenshot.uuid })\n    )\n    this.props.history.push(ROUTING.TRELLO_PAGE)\n  }\n\n  render() {\n    const { settings, currentUser, screenshot, screenshotError, settingsError, settingsSuccess } = this.props\n    if (screenshotError){\n      return (<ErrorPage code={404} message=\"Looks like the screen capture you looking for is no longer here\" />)\n    }else {\n      return (\n        <>\n          <Navbar>\n            <TextAlign mr={5} >\n              <div id=\"js-tools-menu\" />\n            </TextAlign>\n            <Navbar.Link to={ROUTING.OPTIONS_PAGE} text=\"Options\" />\n            <Navbar.Item onClick={this.onShowSettings} text=\"Settings\" />\n            <Navbar.Item onClick={this.onDownloadScreenCapture} text=\"Download\" />\n            <Navbar.Item onClick={this.onContinue} text=\"Post on Trello\" />\n          </Navbar>\n          { this.state.showModal &&\n          <SettingsPage\n            error={settingsError}\n            onSubmit={this.onEditSettings}\n            onClose={this.onShowSettings}\n            initData={settings}\n          /> }\n          <Container mt={500}>\n            <Card overflow={true}>\n              <Card.Body>\n                <div ref={this.imageAnnotateRef} />\n              </Card.Body>\n            </Card>\n          </Container>\n        </>\n      )\n\n    }\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => bindActionCreators({ removeMessages, fetchScreenshot, editSettings, editScreenshot, editSettingsLocal }, dispatch)\nconst mapStateToProps = state => {\n  const { currentUser } = state.auth\n  const { settings, error: settingsError, success: settingsSuccess } = state.settings\n  const { screenshot, error: screenshotError } = state.screenshots\n  return { currentUser, settings, screenshot, settingsError, settingsSuccess, screenshotError }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScreenCaptureEditor)\n","import React from 'react'\n\nimport rules from '../utils/validation'\n\nimport InputText from '../components/InputText'\nimport TextAlign from '../components/TextAlign'\nimport Button from '../components/Button'\nimport Form from '../components/Form'\nimport Field from '../hocomponents/Field'\nimport ColorPicker from '../components/ColorPicker'\nimport Modal from '../components/Modal'\nimport Alert from '../components/Alert'\n\n\nconst TextField = Field(InputText)\n\nexport default class SettingsPage extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {color: props.initData.color}\n  }\n\n  onColorChange = (color) => {\n    this.setState({color: color.hex})\n  }\n\n  render () {\n    const { onSubmit, error, success, onClose, initData = {} } = this.props\n    return (\n      <Modal title=\"Settings\" onClose={onClose}>\n        <Form onSubmit={(values) => onSubmit({...values, color: this.state.color})}>\n          <Modal.Body>\n            { error && <Alert.Error object={error} /> }\n            <TextField\n              name=\"fontsize\"\n              type=\"text\"\n              icon=\"ni-caps-small\"\n              placeholder=\"Font size\"\n              defaultValue={initData && initData.fontsize}\n              validate={[rules.required, rules.minLength(1), rules.maxLength(5)]}\n            />\n            <TextField\n              name=\"linewidth\"\n              type=\"text\"\n              icon=\"ni-vector\"\n              placeholder=\"Line width\"\n              defaultValue={initData && initData.linewidth}\n              validate={[rules.required, rules.digits, rules.min(4), rules.max(40)]}\n            />\n            <ColorPicker label=\"Choose a color\" onChange={ this.onColorChange } color={this.state.color} />\n          </Modal.Body>\n          <Modal.Footer>\n            <Button text=\"Save settings\" style=\"info\" type=\"submit\" />\n            <Button onClick={onClose} text=\"Close\" style=\"primary\" type=\"button\" />\n          </Modal.Footer>\n        </Form>\n      </Modal>\n    )\n  }\n}\n","import React from 'react'\n\n\nexport default Component => \n\n  class Field extends React.Component {\n\n    constructor(props) {\n      super(props)\n      this.state = { error: false }\n    }\n\n    onBlur = (event) => {\n      const value = (event && event.target) ? event.target.value : event.value\n      const { onChange=false, validate } = this.props\n      let { error } = this.state\n      if (validate){\n        const validation = Array.isArray(validate) ? validate : [validate]\n        error = validation.some((fn) => fn.apply(null, [value]))\n        this.setState({ error })\n      }\n      if (onChange) {\n        onChange.apply(null, [value])\n      }\n    }\n  \n    render(){\n      const { validate, ...input } = this.props\n      return (<Component onBlur={this.onBlur} {...this.state}  {...input} />)    \n    }\n  }\n","import $ from \"jquery\"\n\nimport arrow from \"../../assets/img/arrow.png\"\nimport text from \"../../assets/img/text.png\"\nimport square from \"../../assets/img/square.png\"\nimport circle from \"../../assets/img/circle.png\"\nimport brush from \"../../assets/img/brush.png\"\nimport undo from \"../../assets/img/undo.png\"\nimport redo from \"../../assets/img/redo.png\"\nimport pan from \"../../assets/img/pan.png\"\n\n/**\n * Function to annotate the image\n * @param {[type]} el      [description]\n * @param {Object} options [description]\n */\nexport default function Annotate(el, options) {\n  this.options = options;\n  this.$el = $(el);\n  this.$toolElem = $(options.tools)\n  this.clicked = false;\n  this.fromx = null;\n  this.fromy = null;\n  this.fromxText = null;\n  this.fromyText = null;\n  this.tox = null;\n  this.toy = null;\n  this.points = [];\n  this.storedUndo = [];\n  this.storedElement = [];\n  this.images = [];\n  this.img = null;\n  this.selectedImage = null;\n  this.currentWidth = null;\n  this.currentHeight = null;\n  this.selectImageSize = {};\n  this.compensationWidthRate = 1;\n  this.linewidth = 2;\n  this.fontsize = '20px';\n  this.init();\n}\n\nAnnotate.prototype = {\n  init: function() {\n    var self = this;\n    self.linewidth = self.options.linewidth || self.linewidth;\n    self.fontsize = self.options.fontsize || self.fontsize;\n    self.$el.addClass('annotate-container');\n    self.$el.css({\n      cursor: 'pointer'\n    });\n    self.baseLayerId = 'baseLayer_' + self.$el.attr('id');\n    self.drawingLayerId = 'drawingLayer_' + self.$el.attr('id');\n    self.toolOptionId = 'tool_option_' + self.$el.attr('id');\n    self.$el.append($('<canvas id=\"' + self.baseLayerId + '\"></canvas>'));\n    self.$el.append($('<canvas id=\"' + self.drawingLayerId + '\"></canvas>'));\n    self.baseCanvas = document.getElementById(self.baseLayerId);\n    self.drawingCanvas = document.getElementById(self.drawingLayerId);\n    self.baseContext = self.baseCanvas.getContext('2d');\n    self.drawingContext = self.drawingCanvas.getContext('2d');\n    self.baseContext.lineJoin = 'round';\n    self.drawingContext.lineJoin = 'round';\n    var classPosition1 = 'btn-group';\n    var classPosition2 = '';\n\n    self.$tool = '<div id=\"\" class=\"btn-group btn-group-annotate\" role=\"group\" >' +\n      '<div class=\"' + classPosition1 + '\" data-toggle=\"buttons\">' +\n      '<button id=\"undoaction\" title=\"Undo the last annotation\"' +\n      ' class=\"tool-button ' + classPosition2 +\n      ' annotate-undo\">' +\n      ' <img src=\"' + undo + '\" /></button>';\n    if (self.options.unselectTool) {\n      self.$tool += '<label class=\"tool-button active\">' +\n        '<input type=\"radio\" name=\"' + self.toolOptionId +\n        '\" data-tool=\"null\"' +\n        ' data-toggle=\"tooltip\" data-placement=\"top\"' +\n        ' title=\"No tool selected\">' +\n        '<img src=\"'+ pan +'\" />' +\n        '</label>';\n    }\n    self.$tool += '<label class=\"tool-button\">' +\n      '<input type=\"radio\" name=\"' + self.toolOptionId +\n      '\" data-tool=\"rectangle\"' +\n      ' data-toggle=\"tooltip\" data-placement=\"top\"' +\n      ' title=\"Draw an rectangle\">' +\n      ' <img src=\"'+ square +'\" />' +\n      '</label><label class=\"tool-button\">' +\n      '<input type=\"radio\" name=\"' + self.toolOptionId +\n      '\" data-tool=\"circle\"' +\n      ' data-toggle=\"tooltip\"' +\n      'data-placement=\"top\" title=\"Write some text\">' +\n      ' <img src=\"'+ circle +'\" />' +\n      '</label><label class=\"tool-button\">' +\n      '<input type=\"radio\" name=\"' + self.toolOptionId +\n      '\" data-tool=\"text\"' +\n      ' data-toggle=\"tooltip\"' +\n      'data-placement=\"top\" title=\"Write some text\">' +\n      ' <img src=\"'+ text +'\" /></label>' +\n      '<label class=\"tool-button\">' +\n      '<input type=\"radio\" name=\"' + self.toolOptionId +\n      '\" data-tool=\"arrow\"' +\n      ' data-toggle=\"tooltip\" data-placement=\"top\" title=\"Draw an arrow\">' +\n      ' <img src=\"'+ arrow +'\" /></label>' +\n      '<label class=\"tool-button\">' +\n      '<input type=\"radio\" name=\"' + self.toolOptionId +\n      '\" data-tool=\"pen\"' +\n      ' data-toggle=\"tooltip\" data-placement=\"top\" title=\"Pen Tool\">' +\n      ' <img src=\"' + brush +'\" /></label>' +\n      '<button type=\"button\" id=\"redoaction\"' +\n      ' title=\"Redo the last undone annotation\"' +\n      'class=\"tool-button ' + classPosition2 + ' annotate-redo\">' +\n      ' <img src=\"'+ redo +'\" /></button>' +\n      '</div></div>';\n    self.$tool = $(self.$tool);\n    self.$toolElem.append(self.$tool);\n    //self.$el.append(self.$tool).insertBefore($('.annotate-container'))\n    var canvasPosition = self.$el.offset();\n    self.$textbox = $('<textarea id=\"\"' +\n      ' style=\"position:absolute;z-index:100000;display:none;top:0;left:0;' +\n      'background:transparent;border:1px dotted; line-height:25px;' +\n      ';font-size:' + self.fontsize +\n      ';font-family:sans-serif;color:' + self.options.color +\n      ';word-wrap: break-word;outline-width: 0;overflow: hidden;' +\n      'padding:0px\"></textarea>');\n    $('body').append(self.$textbox);\n    if (self.options.images) {\n      self.initBackgroundImages();\n    } else {\n      if (!self.options.width && !self.options.height) {\n        self.options.width = 640;\n        self.options.height = 480;\n      }\n      self.baseCanvas.width = self.drawingCanvas.width = self.options.width;\n      self.baseCanvas.height = self.drawingCanvas.height = self.options\n        .height;\n    }\n    self.$tool.on('change', 'input[name^=\"tool_option\"]', function(e) {\n      self.$el.css({cursor: 'crosshair'});\n      self.$toolElem.find('.tool-button').removeClass('active')\n      $(this).parent('label').addClass('active')\n      self.selectTool($(this));\n    });\n    $('[data-tool=\"' + self.options.type + '\"]').trigger('click');\n    self.$tool.on('click', '.annotate-redo', function(event) {\n      self.redoaction(event);\n    });\n    self.$tool.on('click', '.annotate-undo', function(event) {\n      self.undoaction(event);\n    });\n    $(document).on(self.options.selectEvent, '.annotate-image-select',\n      function(event) {\n        event.preventDefault();\n        var image = self.selectBackgroundImage($(this).attr(self.options.idAttribute));\n        self.setBackgroundImage(image);\n      });\n    $('#' + self.drawingLayerId).on('mousedown touchstart', function(\n      event) {\n      self.annotatestart(event);\n    });\n    $('#' + self.drawingLayerId).on('mouseup touchend', function(event) {\n      self.annotatestop(event);\n    });\n    // https://developer.mozilla.org/en-US/docs/Web/Events/touchleave\n    $('#' + self.drawingLayerId).on('mouseleave touchleave', function(\n      event) {\n      self.annotateleave(event);\n    });\n    $('#' + self.drawingLayerId).on('mousemove touchmove', function(\n      event) {\n      self.annotatemove(event);\n    });\n    $(window).on('resize', function() {\n      self.annotateresize();\n    });\n    self.checkUndoRedo();\n  },\n  generateId: function(length) {\n    var chars =\n      '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz'.split(\n        '');\n    var charsLen = chars.length;\n    if (!length) {\n      length = Math.floor(Math.random() * charsLen);\n    }\n    var str = '';\n    for (var i = 0; i < length; i++) {\n      str += chars[Math.floor(Math.random() * charsLen)];\n    }\n    return str;\n  },\n  addElements: function(newStoredElements, set, callback)\n  {\n    var self = this;\n    this.storedElement = newStoredElements;\n    //console.log('DJ: Adding new annotations');\n    self.clear();\n    self.redraw();\n\n  },\n  pushImage: function(newImage, set, callback) {\n    var self = this;\n    var id = null;\n    var path = null;\n    if (typeof newImage === 'object') {\n      id = newImage.id;\n      path = newImage.path;\n    } else {\n      id = newImage;\n      path = newImage;\n    }\n    if (id === '' || typeof id === 'undefined' || self.selectBackgroundImage(id)) {\n      id = self.generateId(10);\n      while (self.selectBackgroundImage(id)) {\n        id = self.generateId(10);\n      }\n    }\n    var image = {\n      id: id,\n      path: path,\n      storedUndo: [],\n      storedElement: []\n    };\n    self.images.push(image);\n    if (set) {\n      self.setBackgroundImage(image);\n    }\n    if (callback) {\n      callback({\n        id: image.id,\n        path: image.path\n      });\n    }\n    self.$el.trigger('annotate-image-added', [\n      image.id,\n      image.path\n    ]);\n  },\n  initBackgroundImages: function() {\n    var self = this;\n    $.each(self.options.images, function(index, image) {\n      var set = false;\n      if (index === 0) {\n        set = true;\n      }\n      self.pushImage(image, set);\n    });\n  },\n  selectBackgroundImage: function(id) {\n    var self = this;\n    var image = $.grep(self.images, function(element) {\n      return element.id === id;\n    })[0];\n    return image;\n  },\n  setBackgroundImage: function(image) {\n    var self = this;\n    if (self.$textbox.is(':visible')) {\n      self.pushText();\n    }\n    var currentImage = self.selectBackgroundImage(self.selectedImage);\n    if (currentImage) {\n      currentImage.storedElement = self.storedElement;\n      currentImage.storedUndo = self.storedUndo;\n    }\n    self.img = new Image();\n    self.img.src = image.path;\n    self.img.onload = function() {\n      if ((self.options.width && self.options.height) !== undefined ||\n        (self.options.width && self.options.height) !== 0) {\n        self.currentWidth = this.width;\n        self.currentHeight = this.height;\n        self.selectImageSize.width = this.width;\n        self.selectImageSize.height = this.height;\n      } else {\n        self.currentWidth = self.options.width;\n        self.currentHeight = self.options.height;\n      }\n      self.baseCanvas.width = self.drawingCanvas.width = self.currentWidth;\n      self.baseCanvas.height = self.drawingCanvas.height = self.currentHeight;\n      self.baseContext.drawImage(self.img, 0, 0, self.currentWidth,\n        self.currentHeight);\n      self.$el.css({\n        height: self.currentHeight,\n        width: self.currentWidth\n      });\n      self.storedElement = image.storedElement;\n      self.storedUndo = image.storedUndo;\n      self.selectedImage = image.id;\n      self.checkUndoRedo();\n      self.clear();\n      self.redraw();\n      self.annotateresize();\n    };\n  },\n  checkUndoRedo: function() {\n    var self = this;\n    self.$tool.children('.annotate-redo').attr('disabled', self.storedUndo.length === 0);\n    self.$tool.children('.annotate-undo').attr('disabled', self.storedElement.length === 0);\n  },\n  undoaction: function(event) {\n    event.preventDefault();\n    var self = this;\n    self.storedUndo.push(self.storedElement[self.storedElement.length - 1]);\n    self.storedElement.pop();\n    self.checkUndoRedo();\n    self.clear();\n    self.redraw();\n  },\n  redoaction: function(event) {\n    event.preventDefault();\n    var self = this;\n    self.storedElement.push(self.storedUndo[self.storedUndo.length - 1]);\n    self.storedUndo.pop();\n    self.checkUndoRedo();\n    self.clear();\n    self.redraw();\n  },\n  redraw: function() {\n    var self = this;\n    self.baseCanvas.width = self.baseCanvas.width;\n    if (self.options.images) {\n      self.baseContext.drawImage(self.img, 0, 0, self.currentWidth,\n        self.currentHeight);\n    }\n    if (self.storedElement.length === 0) {\n      return;\n    }\n    // clear each stored line\n    for (var i = 0; i < self.storedElement.length; i++) {\n      var element = self.storedElement[i];\n      if (!element){\n        return;\n      }\n      switch (element.type) {\n        case 'rectangle':\n          self.drawRectangle(self.baseContext, element.fromx, element.fromy,\n            element.tox, element.toy);\n          break;\n        case 'arrow':\n          self.drawArrow(self.baseContext, element.fromx, element.fromy,\n            element.tox, element.toy);\n          break;\n        case 'pen':\n          for (var b = 0; b < element.points.length - 1; b++) {\n            var fromx = element.points[b][0];\n            var fromy = element.points[b][1];\n            var tox = element.points[b + 1][0];\n            var toy = element.points[b + 1][1];\n            self.drawPen(self.baseContext, fromx, fromy, tox, toy);\n          }\n          break;\n        case 'text':\n          self.drawText(self.baseContext, element.text, element.fromx,\n            element.fromy, element.maxwidth);\n          break;\n        case 'circle':\n          self.drawCircle(self.baseContext, element.fromx, element.fromy,\n            element.tox, element.toy);\n          break;\n        default:\n      }\n    }\n  },\n  clear: function() {\n    var self = this;\n    // Clear Canvas\n    self.drawingCanvas.width = self.drawingCanvas.width;\n  },\n  drawRectangle: function(context, x, y, w, h) {\n    var self = this;\n    context.beginPath();\n    context.rect(x, y, w, h);\n    context.fillStyle = 'transparent';\n    context.fill();\n    context.lineWidth = self.linewidth;\n    context.strokeStyle = self.options.color;\n    context.stroke();\n  },\n  drawCircle: function(context, x1, y1, x2, y2) {\n    var radiusX = (x2 - x1) * 0.5;\n    var radiusY = (y2 - y1) * 0.5;\n    var centerX = x1 + radiusX;\n    var centerY = y1 + radiusY;\n    var step = 0.05;\n    var a = step;\n    var pi2 = Math.PI * 2 - step;\n    var self = this;\n    context.beginPath();\n    context.moveTo(centerX + radiusX * Math.cos(0), centerY + radiusY *\n      Math.sin(0));\n    for (; a < pi2; a += step) {\n      context.lineTo(centerX + radiusX * Math.cos(a), centerY + radiusY *\n        Math.sin(a));\n    }\n    context.lineWidth = self.linewidth;\n    context.strokeStyle = self.options.color;\n    context.closePath();\n    context.stroke();\n  },\n  drawArrow: function(context, x, y, w, h) {\n    var self = this;\n    var angle = Math.atan2(h - y, w - x);\n    context.beginPath();\n    context.lineWidth = self.linewidth;\n    context.moveTo(x, y);\n    context.lineTo(w, h);\n    context.moveTo(w - self.linewidth * 5 * Math.cos(angle + Math.PI / 6), h - self.linewidth * 5 * Math.sin(angle + Math.PI / 6));\n    context.lineTo(w, h);\n    context.lineTo(w - self.linewidth * 5 * Math.cos(angle - Math.PI / 6), h - self.linewidth * 5 * Math.sin(angle - Math.PI / 6));\n    context.strokeStyle = self.options.color;\n    context.stroke();\n  },\n  drawPen: function(context, fromx, fromy, tox, toy) {\n    var self = this;\n    context.lineWidth = self.linewidth;\n    context.moveTo(fromx, fromy);\n    context.lineTo(tox, toy);\n    context.strokeStyle = self.options.color;\n    context.stroke();\n  },\n  wrapText: function(drawingContext, text, x, y, maxWidth, lineHeight) {\n    var lines = text.split('\\n');\n    for (var i = 0; i < lines.length; i++) {\n      var words = lines[i].split(' ');\n      var line = '';\n      for (var n = 0; n < words.length; n++) {\n        var testLine = line + words[n] + ' ';\n        var metrics = drawingContext.measureText(testLine);\n        var testWidth = metrics.width;\n        if (testWidth > maxWidth && n > 0) {\n          drawingContext.fillText(line, x, y);\n          line = words[n] + ' ';\n          y += lineHeight;\n        } else {\n          line = testLine;\n        }\n      }\n      drawingContext.fillText(line, x, y + i * lineHeight);\n    }\n  },\n  drawText: function(context, text, x, y, maxWidth) {\n    var self = this;\n    context.font = self.fontsize + ' sans-serif';\n    context.textBaseline = 'top';\n    context.fillStyle = self.options.color;\n    self.wrapText(context, text, x + 3, y + 4, maxWidth, 25);\n  },\n  pushText: function() {\n    var self = this;\n    var text = self.$textbox.val();\n    self.$textbox.val('').hide();\n    if (text) {\n      self.storedElement.push({\n        type: 'text',\n        text: text,\n        fromx: self.fromx,\n        fromy: self.fromy,\n        maxwidth: self.tox\n      });\n      if (self.storedUndo.length > 0) {\n        self.storedUndo = [];\n      }\n    }\n    self.checkUndoRedo();\n    self.redraw();\n  },\n  // Events\n  selectTool: function(element) {\n    var self = this;\n    self.options.type = element.data('tool');\n    if (self.$textbox.is(':visible')) {\n      self.pushText();\n    }\n  },\n  annotatestart: function(event) {\n    var self = this;\n    self.clicked = true;\n    var offset = self.$el.offset();\n    if (self.$textbox.is(':visible')) {\n      var text = self.$textbox.val();\n      self.$textbox.val('').hide();\n      if (text !== '') {\n        if (!self.tox) {\n          self.tox = 100;\n        }\n        self.storedElement.push({\n          type: 'text',\n          text: text,\n          fromx: (self.fromxText - offset.left) * self.compensationWidthRate,\n          fromy: (self.fromyText - offset.top) * self.compensationWidthRate,\n          maxwidth: self.tox\n        });\n        if (self.storedUndo.length > 0) {\n          self.storedUndo = [];\n        }\n      }\n      self.checkUndoRedo();\n      self.redraw();\n      self.clear();\n    }\n    self.tox = null;\n    self.toy = null;\n    self.points = [];\n    var pageX = event.pageX || event.originalEvent.touches[0].pageX;\n    var pageY = event.pageY || event.originalEvent.touches[0].pageY;\n    self.fromx = (pageX - offset.left) * self.compensationWidthRate;\n    self.fromy = (pageY - offset.top) * self.compensationWidthRate;\n    self.fromxText = pageX;\n    self.fromyText = pageY;\n    if (self.options.type === 'text') {\n      self.$textbox.css({\n        left: self.fromxText + 2,\n        top: self.fromyText,\n        width: 0,\n        height: 0\n      }).show();\n    }\n    if (self.options.type === 'pen') {\n      self.points.push([\n        self.fromx,\n        self.fromy\n      ]);\n    }\n  },\n  annotatestop: function() {\n    var self = this;\n    self.clicked = false;\n    if (self.toy !== null && self.tox !== null) {\n      switch (self.options.type) {\n        case 'rectangle':\n          self.storedElement.push({\n            type: 'rectangle',\n            fromx: self.fromx,\n            fromy: self.fromy,\n            tox: self.tox,\n            toy: self.toy\n          });\n          break;\n        case 'circle':\n          self.storedElement.push({\n            type: 'circle',\n            fromx: self.fromx,\n            fromy: self.fromy,\n            tox: self.tox,\n            toy: self.toy\n          });\n          break;\n        case 'arrow':\n          self.storedElement.push({\n            type: 'arrow',\n            fromx: self.fromx,\n            fromy: self.fromy,\n            tox: self.tox,\n            toy: self.toy\n          });\n          break;\n        case 'text':\n          self.$textbox.css({\n            left: self.fromxText + 2,\n            top: self.fromyText,\n            width: self.tox - 12,\n            height: self.toy\n          });\n          break;\n        case 'pen':\n          self.storedElement.push({\n            type: 'pen',\n            points: self.points\n          });\n          for (var i = 0; i < self.points.length - 1; i++) {\n            self.fromx = self.points[i][0];\n            self.fromy = self.points[i][1];\n            self.tox = self.points[i + 1][0];\n            self.toy = self.points[i + 1][1];\n            self.drawPen(self.baseContext, self.fromx, self.fromy, self\n              .tox,\n              self.toy);\n          }\n          self.points = [];\n          break;\n        default:\n      }\n      if (self.storedUndo.length > 0) {\n        self.storedUndo = [];\n      }\n      self.checkUndoRedo();\n      self.redraw();\n    } else if (self.options.type === 'text') {\n      self.$textbox.css({\n        left: self.fromxText + 2,\n        top: self.fromyText,\n        width: 100,\n        height: 50\n      });\n    }\n  },\n  annotateleave: function(event) {\n    var self = this;\n    if (self.clicked) {\n      self.annotatestop(event);\n    }\n  },\n  annotatemove: function(event) {\n    var self = this;\n    if (self.options.type) {\n      event.preventDefault();\n    }\n    if (!self.clicked) {\n      return;\n    }\n    var offset = self.$el.offset();\n    var pageX = event.pageX || event.originalEvent.touches[0].pageX;\n    var pageY = event.pageY || event.originalEvent.touches[0].pageY;\n    switch (self.options.type) {\n      case 'rectangle':\n        self.clear();\n        self.tox = (pageX - offset.left) * self.compensationWidthRate -\n          self.fromx;\n        self.toy = (pageY - offset.top) * self.compensationWidthRate -\n          self.fromy;\n        self.drawRectangle(self.drawingContext, self.fromx, self.fromy,\n          self.tox, self.toy);\n        break;\n      case 'arrow':\n        self.clear();\n        self.tox = (pageX - offset.left) * self.compensationWidthRate;\n        self.toy = (pageY - offset.top) * self.compensationWidthRate;\n        self.drawArrow(self.drawingContext, self.fromx, self.fromy,\n          self.tox,\n          self.toy);\n        break;\n      case 'pen':\n        self.tox = (pageX - offset.left) * self.compensationWidthRate;\n        self.toy = (pageY - offset.top) * self.compensationWidthRate;\n        self.fromx = self.points[self.points.length - 1][0];\n        self.fromy = self.points[self.points.length - 1][1];\n        self.points.push([\n          self.tox,\n          self.toy\n        ]);\n        self.drawPen(self.drawingContext, self.fromx, self.fromy, self.tox,\n          self.toy);\n        break;\n      case 'text':\n        self.clear();\n        self.tox = (pageX - self.fromxText) * self.compensationWidthRate;\n        self.toy = (pageY - self.fromyText) * self.compensationWidthRate;\n        self.$textbox.css({\n          left: self.fromxText + 2,\n          top: self.fromyText,\n          width: self.tox - 12,\n          height: self.toy\n        });\n        break;\n      case 'circle':\n        self.clear();\n        self.tox = (pageX - offset.left) * self.compensationWidthRate;\n        self.toy = (pageY - offset.top) * self.compensationWidthRate;\n        self.drawCircle(self.drawingContext, self.fromx, self.fromy,\n          self\n          .tox, self.toy);\n        break;\n      default:\n    }\n  },\n  annotateresize: function() {\n    var self = this;\n    var currentWidth = self.$el.width();\n    var currentcompensationWidthRate = self.compensationWidthRate;\n    self.compensationWidthRate = self.selectImageSize.width / currentWidth;\n    if (self.compensationWidthRate < 1) {\n      self.compensationWidthRate = 1;\n    }\n    self.linewidth = self.options.linewidth * self.compensationWidthRate;\n    self.fontsize = String(parseInt(self.options.fontsize.split('px')[0], 10) * self.compensationWidthRate) + 'px';\n    if (currentcompensationWidthRate !== self.compensationWidthRate) {\n      self.redraw();\n      self.clear();\n    }\n  },\n  updateOptions: function (options) {\n    this.options = $.extend({}, this.options, options)\n    this.exportImage({\n      type: 'image/jpeg',\n      quality: 1\n    }, (imageURI) => {\n      const image = {\n        id: 1,\n        path: imageURI,\n        storedUndo: [],\n        storedElement: []\n      }\n      this.setBackgroundImage(image)\n    })\n  },\n  getColor: function () {\n    return JSON.parse(JSON.stringify( this.options.color ))\n  },\n  destroy: function() {\n    var self = this;\n    $(document).off(self.options.selectEvent, '.annotate-image-select');\n    self.$tool.remove();\n    self.$textbox.remove();\n    self.$el.children('canvas').remove();\n    self.$el.removeData('annotate');\n  },\n  exportImage: function(options, callback) {\n    var self = this;\n    if (self.$textbox.is(':visible')) {\n      self.pushText();\n    }\n    var exportDefaults = {\n      type: 'image/jpeg',\n      quality: 0.75\n    };\n    options = $.extend({}, exportDefaults, options);\n    var image = self.baseCanvas.toDataURL(options.type, options.quality);\n    if (callback) {\n      callback(image);\n    }else {\n      self.options.onExport(image);\n    }\n  }\n}\n\n$.fn.annotate = function(options, cmdOption, callback) {\n  var $annotate = $(this).data('annotate');\n  if (options === 'destroy') {\n    if ($annotate) {\n      $annotate.destroy();\n    } else {\n      throw new Error('No annotate initialized for: #' + $(this).attr(\n        'id'));\n    }\n  } else if (options === 'push') {\n    if ($annotate) {\n      $annotate.pushImage(cmdOption, true, callback);\n    } else {\n      throw new Error('No annotate initialized for: #' + $(this).attr(\n        'id'));\n    }\n\n  }else if (options === 'fill') {\n    if ($annotate) {\n      $annotate.addElements(cmdOption, true, callback);\n    } else {\n      throw new Error('No annotate initialized for: #' + $(this).attr(\n        'id'));\n    }\n\n  } else if (options === 'export') {\n    if ($annotate) {\n      $annotate.exportImage(cmdOption, callback);\n    } else {\n      throw new Error('No annotate initialized for: #' + $(this).attr(\n        'id'));\n    }\n  } else {\n    var opts = $.extend({}, $.fn.annotate.defaults, options);\n    var annotate = new Annotate($(this), opts);\n    $(this).data('annotate', annotate);\n  }\n};\n\n$.fn.annotate.defaults = {\n  width: null,\n  height: null,\n  images: [],\n  color: 'red',\n  type: 'unselect',\n  linewidth: 2,\n  fontsize: '20px',\n  bootstrap: true,\n  position: 'top',\n  idAttribute: 'id',\n  selectEvent: 'change',\n  unselectTool: false,\n  onExport: function(image) {\n    console.log(image);\n  }\n};\n","const rules = {\n  required: value => !value,\n  minLength: min => value => value && (value.length < min ? true : false),\n  maxLength: max => value => value && value.length > max ? true : false,\n  email: value => value ? !(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(value)) : false,\n  min: min => value =>  value && !isFinite(value) && parseInt(value) > min ? true : false,\n  max: max => value => value && !isFinite(value) && parseInt(value) < max ? true : false,\n  pattern: pattern => value => !value ? false : !pattern.test(value),\n  equalTo: eq => value => !value ? false : eq != value,\n  digits: value => !value || !/^\\d+$/.test(value),\n}\n\n\nexport default rules\n"],"sourceRoot":""}